require-stack-version: ">= 1.4"

resolver: nightly-2020-11-11

packages:
- .
- apps/argv
- apps/bench
- apps/dataframe
- apps/hello
- apps/lda
- apps/rdd-ops

extra-deps:
- inline-java-0.9.1
- jni-0.7.0
- jvm-0.5.0
- jvm-batching-0.1.2
- jvm-streaming-0.3.2
- distributed-closure-0.4.2.0

nix:
  # Requires Stack >= 1.2.
  shell-file: shell.nix
  path: ["nixpkgs=./nixpkgs.nix"]

docker:
  enable: false
  image: tweag/sparkle
  run-args: ["--net=bridge"]
  stack-exe: image
